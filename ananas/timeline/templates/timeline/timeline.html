<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Timeline</title>
    <link rel="stylesheet" href="{{STATIC_URL}}/static/timeline/css/bootstrap.min.css">
</head>
<body>
    <h1>Bienvenue sur la timeline !</h1>

    <!--Ajouter un nouvel article-->
    <form method="post">
        {% csrf_token %}
        {{ form }}
        <input type="submit" value="Submit">
    </form>
    <div> <!--Liste des posts-->
    <!--For comment in comments-->
        <!--TODO: Finir d'intÃ©grer le bootsnip-->
        <div class="container">
            <div class="row">
    {% for post in posts %}<!--TODO: Redimentionner les images-->




        <div class="col-lg-4 col-sm-6 mb-4">
          <div class="card h-100">
            <a href={{ post.id }}><img class="card-img-top" src="/media/{{post.photo}}" alt=""></a>
            <div class="card-body">
              <h4 class="card-title">
                <a href={{ post.id }}>{{ post.titre }}</a>
              </h4>
              <p class="card-text">{{ post.contenu_post| safe |truncatewords_html:7 }}</p>
            </div>
          </div>
        </div>

      <!-- /.row -->
    <!--TODO: content-markdown-->
    <!--Ancien
    </div>
        <div class="post">
            <h3>{{ post.titre }}</h3>
            <p>{{ post.contenu_post| safe |truncatewords_html:7 }}</p>
            <p><a href={{ post.id }}>Lire la suite</a></p>

            {% if post.photo %}
                <div class="photos">
                    <img src="/media/{{post.photo}}"/>
                </div>
            {% endif %}
        </div>


        <div>---------------------</div>

        {% empty %}
        <p>Aucun article sur la timeline.</p>-->
    {% endfor %}
                </div>
    </div>

    <!--jQuery-->
    <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"></script>
    <!--Markdown-->
    <script
            src="https://cdnjs.cloudflare.com/ajax/libs/marked/1.1.0/marked.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".content-markdown").each(function(){

                var article_content = $("this").text()
                console.log(article_content)
                var markedArticle = marked(article_content)
                console.log(markedArticle)
                $(this).html(markedArticle)
            })

        })
    </script>

<!--Snippet : https://startbootstrap.com/snippets/portfolio-three-column/-->
<div class="container">


  <!-- Pagination -->
  <ul class="pagination justify-content-center">
    <li class="page-item">
      <a class="page-link" href="#" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
            <span class="sr-only">Previous</span>
          </a>
    </li>
    <li class="page-item">
      <a class="page-link" href="#">1</a>
    </li>
    <li class="page-item">
      <a class="page-link" href="#">2</a>
    </li>
    <li class="page-item">
      <a class="page-link" href="#">3</a>
    </li>
    <li class="page-item">
      <a class="page-link" href="#" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
            <span class="sr-only">Next</span>
          </a>
    </li>
  </ul>

</div>
<!-- /.container -->


</body>
</html>